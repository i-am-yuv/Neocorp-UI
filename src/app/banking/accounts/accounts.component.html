<p-toast></p-toast>
<div class="">
    <div class="bg-white iconSCSS1" *ngIf="value == 'credit'">
        <div class="col-4">
            <p-breadcrumb class="max-w-full" [model]="items1"></p-breadcrumb>
        </div>
        <div class="col-8">
            <div class=" border-200 text-right">
                <button type="button" pButton (click)="addAccount()" class=" mr-3 custom-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="mr-2" viewBox="0 0 20 20"
                        fill="none">
                        <path
                            d="M17.5 10C17.5 10.1658 17.4342 10.3247 17.3169 10.4419C17.1997 10.5592 17.0408 10.625 16.875 10.625H10.625V16.875C10.625 17.0408 10.5592 17.1997 10.4419 17.3169C10.3247 17.4342 10.1658 17.5 10 17.5C9.83424 17.5 9.67527 17.4342 9.55806 17.3169C9.44085 17.1997 9.375 17.0408 9.375 16.875V10.625H3.125C2.95924 10.625 2.80027 10.5592 2.68306 10.4419C2.56585 10.3247 2.5 10.1658 2.5 10C2.5 9.83424 2.56585 9.67527 2.68306 9.55806C2.80027 9.44085 2.95924 9.375 3.125 9.375H9.375V3.125C9.375 2.95924 9.44085 2.80027 9.55806 2.68306C9.67527 2.56585 9.83424 2.5 10 2.5C10.1658 2.5 10.3247 2.56585 10.4419 2.68306C10.5592 2.80027 10.625 2.95924 10.625 3.125V9.375H16.875C17.0408 9.375 17.1997 9.44085 17.3169 9.55806C17.4342 9.67527 17.5 9.83424 17.5 10Z"
                            fill="white" />
                    </svg><span class="text-white">Create New Account</span>
                </button>
            </div>
        </div>
    </div>

    <div class="bg-white iconSCSS1" *ngIf="value == 'debit'">
        <div class="col-4">
            <p-breadcrumb class="max-w-full" [model]="items2"></p-breadcrumb>
        </div>
        <div class="col-8">
            <div class=" border-200 text-right">
                <button type="button" pButton (click)="addAccount()" class=" mr-3 custom-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="mr-2" viewBox="0 0 20 20"
                        fill="none">
                        <path
                            d="M17.5 10C17.5 10.1658 17.4342 10.3247 17.3169 10.4419C17.1997 10.5592 17.0408 10.625 16.875 10.625H10.625V16.875C10.625 17.0408 10.5592 17.1997 10.4419 17.3169C10.3247 17.4342 10.1658 17.5 10 17.5C9.83424 17.5 9.67527 17.4342 9.55806 17.3169C9.44085 17.1997 9.375 17.0408 9.375 16.875V10.625H3.125C2.95924 10.625 2.80027 10.5592 2.68306 10.4419C2.56585 10.3247 2.5 10.1658 2.5 10C2.5 9.83424 2.56585 9.67527 2.68306 9.55806C2.80027 9.44085 2.95924 9.375 3.125 9.375H9.375V3.125C9.375 2.95924 9.44085 2.80027 9.55806 2.68306C9.67527 2.56585 9.83424 2.5 10 2.5C10.1658 2.5 10.3247 2.56585 10.4419 2.68306C10.5592 2.80027 10.625 2.95924 10.625 3.125V9.375H16.875C17.0408 9.375 17.1997 9.44085 17.3169 9.55806C17.4342 9.67527 17.5 9.83424 17.5 10Z"
                            fill="white" />
                    </svg><span class="text-white">Create New Account</span>
                </button>
            </div>
        </div>
    </div>

    <div>
        <div class="mt-5 ml-6 text-left">
            <p-selectButton [options]="stateOptions" [(ngModel)]="value" optionLabel="label"
                optionValue="value"></p-selectButton>
        </div>

        <div *ngIf="value == 'credit'">
            <div class="m-6 bg-white border-round-3xl">
                <div class="p-5">
                    <div class="flex gap-2" style=" justify-content: center;">

                        <!-- Left List Panel -->
                        <div class="col-4">
                            <p-panel class="left-panel ">
                                <ng-template pTemplate="header">
                                    <span class="p-panel-title" style="padding: 1px">Credit Account</span>
                                </ng-template>
                                <ng-template pTemplate="content">
                                    <div class="left-panel-content">
                                        <br />

                                        <div *ngFor="let item of allCreditAccounts" class="order-list"
                                            [ngClass]="{ 'bg-gray-100': activeCreditAccount.id === item.id }">
                                            <div class=" list-item" (click)="changeCreditAccount(item)">
                                                <div class="iconSCSS w-full gap-3 p-3">
                                                    <div class="col-2  justify-center align-center">
                                                        <div class="person-icon">{{ item.bankname.charAt(0) }}</div>
                                                    </div>
                                                    <div class="col-8">
                                                        <div class="text-base"><b>{{ item.bankname }}</b></div>
                                                        <div class="">
                                                            <div class="text-base">
                                                                <p class="text-sm">Account No: {{item.accountNumber}}
                                                                </p>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="text-center m-5" *ngIf="allCreditAccounts.length === 0">
                                            No Roles
                                        </div>
                                    </div>
                                </ng-template>
                                <p-footer> Total: {{ this.totalCARecords}} </p-footer>
                            </p-panel>
                        </div>

                        <!-- Right Panel of Listing Details -->
                        <div class="col-8">
                            <p-panel>
                                <ng-template pTemplate="header">
                                    <div class="w-full">
                                        <div class="grid m-0">
                                            <div class="col-6 p-0">
                                                <span class="p-panel-title">Details</span>
                                            </div>
                                        </div>
                                    </div>
                                </ng-template>
                                <div class="right-panel-content">
                                    <div class="text-center m-5" *ngIf="!activeCreditAccount.id">
                                        <img src="/assets/role.png" width="400" /><br />
                                        Select Credit Account
                                    </div>

                                    <div *ngIf="activeCreditAccount.id">

                                        <form [formGroup]="creditAccountForm" (ngSubmit)="updateCreditAccount()">
                                            <div class="">

                                                <div class="field col-12">
                                                    <label class="ml-2">Bank Name: </label>
                                                    <input pInputText formControlName="bankname"
                                                        placeholder="Enter Bank Name" class="w-full" />
                                                    <error-message
                                                        [controlName]="creditAccountForm.controls['bankname']"></error-message>
                                                </div>


                                                <div class="field col-12">
                                                    <label class="ml-2">Account Number:</label>
                                                    <input pInputText formControlName="accountNumber"
                                                        placeholder="Enter Account Number" class="w-full" />
                                                    <error-message
                                                        [controlName]="creditAccountForm.controls['accountNumber']"></error-message>
                                                </div>


                                                <div class="field col-12">
                                                    <label class="ml-2">Confirm Account Number:</label>
                                                    <input pInputText formControlName="confirmAccountNumber"
                                                        placeholder="Enter Confirm Account Number" class="w-full" />
                                                    <error-message
                                                        [controlName]="creditAccountForm.controls['confirmAccountNumber']"></error-message>
                                                </div>

                                                <div class="field col-12">
                                                    <label class="ml-2">IfSC Code:</label>
                                                    <input pInputText formControlName="ifsc"
                                                        placeholder="Enter Bank Name" class="w-full" />
                                                    <error-message
                                                        [controlName]="creditAccountForm.controls['ifsc']"></error-message>
                                                </div>

                                                <div class="field col-12">
                                                    <label class="ml-2">Account Type:</label>
                                                    <div class="payment-dropdown ">
                                                        <p-dropdown class="bg-slate-200" [options]="accountType"
                                                            [style]="{ width: '100%' }"
                                                            placeholder="Choose Account type" optionLabel="name"
                                                            optionValue="name"
                                                            formControlName="accountType"></p-dropdown>
                                                    </div>
                                                </div>

                                            </div>


                                            <div class="flex col-12">
                                                <div class="col-9"></div>
                                                <div class="flex col-3 text-right">
                                                    <button type="button" pButton icon="pi pi-pencil" iconPos="right"
                                                        class="ml-2" (click)="updateDebitAccount()"> Edit</button>
                                                    <button type="button" pButton icon="pi pi-trash" iconPos="right"
                                                        class="ml-2 deleteBtn" (click)="deleteAccount()">Delete</button>
                                                </div>
                                            </div>

                                        </form>

                                        <p-dialog header="Header" [(visible)]="deleteDialLogvisible" [modal]="true"
                                            [style]="{ width: '30vw' }" [draggable]="false" [resizable]="false">
                                            <ng-template pTemplate="header">
                                                <span class="text-xl font-bold">Confirmation</span>
                                            </ng-template>
                                            <p class="m-0">Are you sure you want to delete this Credit Account?</p>
                                            <ng-template pTemplate="footer">
                                                <p-button icon="pi pi-times" (click)="cancelDelete()" label="Cancel"
                                                    styleClass="p-button-text"></p-button>
                                                <p-button icon="pi pi-check" (click)="deleteConfirmCA()" label="Yes"
                                                    styleClass="p-button-text"></p-button>
                                            </ng-template>
                                        </p-dialog>


                                    </div>
                                </div>
                            </p-panel>
                        </div>
                        <!-- Right Panel of Listing Details Ends-->

                    </div>
                </div>
            </div>
        </div>

        <div *ngIf="value == 'debit'">
            <div class="m-6 bg-white border-round-3xl">
                <div class="p-5">
                    <div class="flex gap-2" style=" justify-content: center;">

                        <!-- Left List Panel -->
                        <div class="col-4">
                            <p-panel class="left-panel ">
                                <ng-template pTemplate="header">
                                    <span class="p-panel-title" style="padding: 1px">Debit Account</span>
                                </ng-template>
                                <ng-template pTemplate="content">
                                    <div class="left-panel-content">
                                        <br />

                                        <div *ngFor="let item of allDebitAccounts" class="order-list"
                                            [ngClass]="{ 'bg-gray-100': activeDebitAccount.id === item.id }">
                                            <div class=" list-item" (click)="changeDebitAccount(item)">
                                                <div class="iconSCSS w-full gap-3 p-3">
                                                    <div class="col-2  justify-center align-center">
                                                        <div class="person-icon">{{ item.bankname.charAt(0) }}</div>
                                                    </div>
                                                    <div class="col-8">
                                                        <div class="text-base"><b>{{ item.bankname }}</b></div>
                                                        <div class="">
                                                            <div class="text-base">
                                                                <p class="text-sm">Account No: {{item.accountNumber}}
                                                                </p>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="text-center m-5" *ngIf="allDebitAccounts.length === 0">
                                            No Roles
                                        </div>
                                    </div>
                                </ng-template>
                                <p-footer> Total: {{ this.totalDARecords}} </p-footer>
                            </p-panel>
                        </div>

                        <!-- Right Panel of Listing Details -->
                        <div class="col-8">
                            <p-panel>
                                <ng-template pTemplate="header">
                                    <div class="w-full">
                                        <div class="grid m-0">
                                            <div class="col-6 p-0">
                                                <span class="p-panel-title">Details</span>
                                            </div>
                                        </div>
                                    </div>
                                </ng-template>
                                <div class="right-panel-content">
                                    <div class="text-center m-5" *ngIf="!activeDebitAccount.id">
                                        <img src="/assets/role.png" width="400" /><br />
                                        Select Debit Account
                                    </div>

                                    <div *ngIf="activeDebitAccount.id" (ngSubmit)="updateDebitAccount()">

                                        <form [formGroup]="debitAccountForm">
                                            <div class="">

                                                <div class="field col-12">
                                                    <label class="ml-2">Bank Name: </label>
                                                    <input pInputText formControlName="bankname"
                                                        placeholder="Enter Bank Name" class="w-full" />
                                                    <error-message
                                                        [controlName]="creditAccountForm.controls['bankname']"></error-message>
                                                </div>


                                                <div class="field col-12">
                                                    <label class="ml-2">Account Number:</label>
                                                    <input pInputText formControlName="accountNumber"
                                                        placeholder="Enter Account Number" class="w-full" />
                                                    <error-message
                                                        [controlName]="creditAccountForm.controls['accountNumber']"></error-message>
                                                </div>


                                                <div class="field col-12">
                                                    <label class="ml-2">Confirm Account Number:</label>
                                                    <input pInputText formControlName="confirmAccountNumber"
                                                        placeholder="Enter Confirm Account Number" class="w-full" />
                                                    <error-message
                                                        [controlName]="creditAccountForm.controls['confirmAccountNumber']"></error-message>
                                                </div>

                                                <div class="field col-12">
                                                    <label class="ml-2">Ifsc Code:</label>
                                                    <input pInputText formControlName="ifsc"
                                                        placeholder="Enter Bank Name" class="w-full" />
                                                    <error-message
                                                        [controlName]="creditAccountForm.controls['ifsc']"></error-message>
                                                </div>

                                                <div class="field col-12">
                                                    <label class="ml-2">Account Type:</label>
                                                    <div class="payment-dropdown ">
                                                        <p-dropdown class="bg-slate-200" [options]="accountType"
                                                            [style]="{ width: '100%' }"
                                                            placeholder="Choose Account type" optionLabel="name"
                                                            optionValue="name"
                                                            formControlName="accountType"></p-dropdown>
                                                    </div>
                                                </div>

                                            </div>

                                            <div class="flex col-12">
                                                <div class="col-9"></div>
                                                <div class="flex col-3 text-right">
                                                    <button type="button" pButton icon="pi pi-pencil" iconPos="right"
                                                        class="ml-2" (click)="updateDebitAccount()"> Edit</button>
                                                    <button type="button" pButton icon="pi pi-trash" iconPos="right"
                                                        class="ml-2 deleteBtn" (click)="deleteAccount()">Delete</button>
                                                </div>
                                            </div>

                                            <p-dialog header="Header" [(visible)]="deleteDialLogvisible" [modal]="true"
                                                [style]="{ width: '30vw' }" [draggable]="false" [resizable]="false">
                                                <ng-template pTemplate="header">
                                                    <span class="text-xl font-bold">Confirmation</span>
                                                </ng-template>
                                                <p class="m-0">Are you sure you want to delete this Debit Account?</p>
                                                <ng-template pTemplate="footer">
                                                    <p-button icon="pi pi-times" (click)="cancelDelete()" label="Cancel"
                                                        styleClass="p-button-text"></p-button>
                                                    <p-button icon="pi pi-check" (click)="deleteConfirmDA()" label="Yes"
                                                        styleClass="p-button-text"></p-button>
                                                </ng-template>
                                            </p-dialog>
                                        </form>


                                    </div>
                                </div>
                            </p-panel>
                        </div>
                        <!-- Right Panel of Listing Details Ends-->

                    </div>
                </div>
            </div>
        </div>


    </div>
</div>