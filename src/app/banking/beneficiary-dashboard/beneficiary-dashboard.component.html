<p-toast></p-toast>
<div class="">
    <div class="bg-white iconSCSS1">
        <div class="col-4">
            <p-breadcrumb class="max-w-full" [model]="items"></p-breadcrumb>
        </div>
        <div class="col-8">
            <div class=" border-200 text-right ">
                <button type="button" pButton (click)="CreateNewBeneficiary()"
                    class=" mr-3 bg-blue-500 text-white px-4 py-2.5 rounded-md hover:bg-blue-600 ">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="mr-2" viewBox="0 0 20 20"
                        fill="none">
                        <path
                            d="M17.5 10C17.5 10.1658 17.4342 10.3247 17.3169 10.4419C17.1997 10.5592 17.0408 10.625 16.875 10.625H10.625V16.875C10.625 17.0408 10.5592 17.1997 10.4419 17.3169C10.3247 17.4342 10.1658 17.5 10 17.5C9.83424 17.5 9.67527 17.4342 9.55806 17.3169C9.44085 17.1997 9.375 17.0408 9.375 16.875V10.625H3.125C2.95924 10.625 2.80027 10.5592 2.68306 10.4419C2.56585 10.3247 2.5 10.1658 2.5 10C2.5 9.83424 2.56585 9.67527 2.68306 9.55806C2.80027 9.44085 2.95924 9.375 3.125 9.375H9.375V3.125C9.375 2.95924 9.44085 2.80027 9.55806 2.68306C9.67527 2.56585 9.83424 2.5 10 2.5C10.1658 2.5 10.3247 2.56585 10.4419 2.68306C10.5592 2.80027 10.625 2.95924 10.625 3.125V9.375H16.875C17.0408 9.375 17.1997 9.44085 17.3169 9.55806C17.4342 9.67527 17.5 9.83424 17.5 10Z"
                            fill="white" />
                    </svg><span class="text-white">Create Beneficiary</span>
                </button>
            </div>
        </div>
        
    </div>

    <div class="flex gap-5 m-6">

        <div class="col-6 bg-white border-round-3xl p-4">
            <div>
                <p-panel class="left-panel ">
                    <ng-template pTemplate="header">
                        <span class="p-panel-title" style="padding: 1px">All Beneficiary</span>
                    </ng-template>
                    <div class="p-inputgroup pl-2 pr-2 pt-2">
                        <!-- <p-input [format]="false" [(ngModel)]="searchOrder" placeholder="Search Purchase Order"
                            > -->
                            <input pInputText  placeholder="Search" [(ngModel)]="searchBN"
                                class="w-full custom-input" (ngModelChange)="searchBNs(searchBN)" />
                        <button type="button" pButton pRipple icon="pi pi-search" (click)="searchBNs(searchBN)"
                            styleClass="p-button-success"></button>
                    </div>
                    <ng-template pTemplate="content">
                        <div class="left-panel-content">
                            <br />
                            <!-- <div class="left-panel-content"> -->
                            <div *ngFor="let item of allBeneficairy" class="order-list"
                                [ngClass]="{ 'bg-gray-100': activeBeneficiary.id === item.id }">
                                <div class="list-item" (click)="changeBeneficiary(item)">
                                    <div class="iconSCSS w-full  p-3">
                                        <div class=" col-2  justify-center align-center">
                                            <div class="person-icon">{{item.beneficaryName.charAt(0)}}</div>
                                        </div>
                                        <div class=" col-10">
                                            <div class="text-base"><b>{{ item.beneficaryName }} {{item.nickname}}</b>
                                            </div>
                                            <div class="flex gap-2 ">
                                                <div class="col-8  text-base  ">
                                                    Mobile Number: {{ item.mobileNumber }}<br>
                                                </div>
                                                <div class="col-4 text-base text-right">
                                                </div>
                                            </div>
                                        </div>
                                    </div>



                                </div>
                            </div>

                            <div class="text-center m-5" *ngIf="allBeneficairy.length === 0">
                                No Beneficiary Available, Please Create One
                            </div>
                        </div>
                    </ng-template>
                    <p-footer> Total: {{ this.totalRecords}} </p-footer>
                </p-panel>
            </div>
        </div>

        <div class=" col-6 bg-white border-round-3xl p-4">
            <p-panel>
                <ng-template pTemplate="header">
                    <div class="w-full" *ngIf="!activeBeneficiary.id">

                    </div>
                    <div class="w-full" *ngIf="activeBeneficiary.id">
                        <div class="iconSCSS w-full gap-1">
                            <div class=" col-2  justify-center align-center">
                                <div class="person-icon">{{ activeBeneficiary.beneficaryName?.charAt(0) }}</div>
                            </div>
                            <div class=" col-10  justify-center align-center">
                                <p class="text-lg font-semibold">{{activeBeneficiary.nickname}}</p>
                                <p class="text-lg">{{activeBeneficiary.accountNumber}}</p>
                            </div>
                        </div>
                    </div>

                </ng-template>
                <div class="right-panel-content">
                    <div class="text-center m-5" *ngIf="allBeneficairy.length === 0">
                        <p class="text-xl mt-5 text-center">Create New!</p>
                    </div>
                    <div class="text-center m-5" *ngIf="!activeBeneficiary.id && allBeneficairy.length != 0">
                        <!-- <img src="/assets/PoImage.png" width="200" height="auto"><br> -->
                        <p class="text-lg text-center">Please, Select the Beneficiary</p>
                    </div>
                    <div *ngIf="activeBeneficiary.id">
                        <div class="flex">
                            <div class="field col-8">
                                <p class="text-lg blueText">Beneficiary Details:</p>
                            </div>

                            <div class="iconSCSS w-full gap-1 mr-3 cursor-pointer"
                                (click)="onEditB(activeBeneficiary.id)">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="22" viewBox="0 0 10 11"
                                    fill="none">
                                    <g clip-path="url(#clip0_862_17281)">
                                        <path
                                            d="M7.0257 2.11389L7.72882 1.37075C8.03392 1.04829 8.52858 1.04829 8.83368 1.37075C9.13877 1.69321 9.13877 2.21602 8.83368 2.53848L4.40924 7.21469C4.18896 7.44751 3.91726 7.61864 3.6187 7.71264L2.5 8.06485L2.83324 6.88249C2.92218 6.56694 3.0841 6.27978 3.30438 6.04697L7.0257 2.11389ZM7.0257 2.11389L8.125 3.27574M7.5 6.30334V8.39513C7.5 8.94236 7.08027 9.38598 6.5625 9.38598H2.1875C1.66973 9.38598 1.25 8.94236 1.25 8.39513V3.77117C1.25 3.22394 1.66973 2.78032 2.1875 2.78032H4.16667"
                                            stroke="#6F7174" stroke-width="0.625" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_862_17281">
                                            <rect width="10" height="10.5691" fill="white"
                                                transform="translate(0 0.138184)" />
                                        </clipPath>
                                    </defs>
                                </svg>
                                <div class="text-sm font-light">Edit Beneficiary</div>
                            </div>


                        </div>
                        <div class="flex gap-2 ">

                            <div class="field col-5">
                                <label class="mr-3 blueText">Beneficiary Name:</label>
                                <p>{{ this.activeBeneficiary.beneficaryName}}</p>
                            </div>

                            <div class="field col-5">
                                <label class="mr-3 blueText">Nick Name:</label>
                                <p>{{ this.activeBeneficiary.nickname}}</p>
                            </div>
                        </div>

                        <hr class="custom-hr">

                        <p class="text-lg blueText mt-2">Account Details:</p><br>
                        <div class="flex gap-2">
                            <div class="field col-5">
                                <label class="mr-3  blueText">Account Number</label><br>
                                <p>{{ this.activeBeneficiary.accountNumber}}</p>
                            </div>
                            <div class="field col-5">
                                <label class="mr-3  blueText">IFSC code</label><br>
                                <p>{{ this.activeBeneficiary.ifscCode}}</p>
                            </div>
                        </div>

                        <hr class="custom-hr">

                        <p class="text-lg blueText mt-2">Other Details:</p><br>
                        <div class="flex gap-2">
                            <div class="field col-5">
                                <label class="mr-3  blueText">Mobile Number</label><br>
                                <p>{{ this.activeBeneficiary.mobileNumber}}</p>
                            </div>
                            <div class="field col-5">
                                <label class="mr-3  blueText">MMID</label><br>
                                <p>{{ this.activeBeneficiary.mmid}}</p>
                            </div>
                        </div>

                    </div>
                </div>
            </p-panel>
        </div>

    </div>


</div>
<p-blockUI [blocked]="submitted">
    <i class="pi pi-spin pi-spinner" style="font-size: 3rem"></i>
</p-blockUI>