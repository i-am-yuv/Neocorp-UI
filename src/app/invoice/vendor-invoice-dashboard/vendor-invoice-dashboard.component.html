<p-toast></p-toast>

        <div class="">
            <div class="bg-white flex">
                <div class="col-4 py-3">
                    <p-breadcrumb class="max-w-full" [model]="items"></p-breadcrumb>
                </div>
                <div class="col-8">
                    <div class="border-200 text-right p-3">
                        <button type="button" pButton  (click)="CreateNewVI()"
                            class="mr-3 bg-blue-700 text-white px-4 py-2.5 rounded-md hover:bg-blue-800 ">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="mr-2" viewBox="0 0 20 20" fill="none">
                                <path
                                    d="M17.5 10C17.5 10.1658 17.4342 10.3247 17.3169 10.4419C17.1997 10.5592 17.0408 10.625 16.875 10.625H10.625V16.875C10.625 17.0408 10.5592 17.1997 10.4419 17.3169C10.3247 17.4342 10.1658 17.5 10 17.5C9.83424 17.5 9.67527 17.4342 9.55806 17.3169C9.44085 17.1997 9.375 17.0408 9.375 16.875V10.625H3.125C2.95924 10.625 2.80027 10.5592 2.68306 10.4419C2.56585 10.3247 2.5 10.1658 2.5 10C2.5 9.83424 2.56585 9.67527 2.68306 9.55806C2.80027 9.44085 2.95924 9.375 3.125 9.375H9.375V3.125C9.375 2.95924 9.44085 2.80027 9.55806 2.68306C9.67527 2.56585 9.83424 2.5 10 2.5C10.1658 2.5 10.3247 2.56585 10.4419 2.68306C10.5592 2.80027 10.625 2.95924 10.625 3.125V9.375H16.875C17.0408 9.375 17.1997 9.44085 17.3169 9.55806C17.4342 9.67527 17.5 9.83424 17.5 10Z"
                                    fill="white" />
                            </svg> Create Vendor Invoice
                        </button>
                    </div>
                </div>
            </div>

            <div class="m-6 bg-white border-round-3xl">
                
                <div class="p-5">
                    <div class="flex gap-4" style=" justify-content: center;">
                        <div class="col-5">
                        <p-panel class="left-panel ">
                            <ng-template pTemplate="header">
                                <span class="p-panel-title" style="padding: 1px">Vendor Invoice</span>
                            </ng-template>
                            <div class="p-inputgroup pl-2 pr-2 pt-2">

                                <input pInputText placeholder="Search" [(ngModel)]="searchVI" class="w-full custom-input"
                                    (ngModelChange)="searchVIs(searchVI)" />
                                <button type="button" pButton pRipple icon="pi pi-search" (click)="searchVIs(searchVI)"
                                    styleClass="p-button-success">
                                </button>
    
                            </div>
                            <ng-template pTemplate="content">
                                <div class="left-panel-content">
                                    <br />
                                    <!-- <div class="left-panel-content"> -->
                                    <div *ngFor="let item of allVIs" class="order-list"
                                        [ngClass]="{ 'bg-gray-100': activeInvoice.id === item.id }">
                                        <div class="list-item" (click)="changeOrder(item)">
                                            <div class="iconSCSS w-full gap-2 p-3 ">
                                                <div class="justify-center align-center col-2">
                                                    <div class="person-icon">{{
                                                        item.vendor?.firstName.charAt(0) +
                                                        item.vendor?.lastName.charAt(0) }}</div>
                                                </div>
                                                <div class=" col-10">
                                                    <div class="text-base "><b>{{ item.documentnumber }}</b></div>
                                                    <div class="flex gap-1 w-full">
                                                        <div class="col-8  text-base  ">
                                                            {{ item.vendor?.firstName }} {{ item.vendor?.lastName }} <br>
                                                            <p class="font-light text-sm">Date: {{item.dueDate| date
                                                                :'yyyy-MM-dd'}}</p>
                                                            </div>
                                                            <div class="col-4 text-base text-right">
                                                                <b>₹: </b>{{item.grosstotal ? item.grosstotal : '0.00' }} <br>
                                                                <p class="text-right">{{item.status}}</p>
                                                            </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="text-center m-5" *ngIf="allVIs.length === 0">
                                        No Vendor Invoice Available
                                    </div>
                                </div>
                                
                            </ng-template>
                            <p-footer> Total: {{ this.totalRecords}} </p-footer>
                        </p-panel>
                    </div>

                   
                    <div class="col-7  ">
                        <p-panel>
                            <ng-template pTemplate="header">
                                <div class="w-full">
                                    <div class="grid m-0">
                                        <div class="col-6 p-0">
                                            <span class="p-panel-title">Vendor Invoice</span>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                            <div class="right-panel-content">
                                <div class="text-center m-5" *ngIf="!activeInvoice.id && allVIs.length > 0">
                                    <img src="/assets/invoices.png"  width="400"><br>
                                    <p class="mt-4 text-xl">Please, Select Vendor Invoice</p>

                                    <!-- <img src="assets/empty.svg" width="250" /><br />
                                    Select Vendor Invoice -->
                                </div>
                                <div class="text-center m-5" *ngIf="allVIs.length === 0">
                                    No Vendor Invoice Found, Please Create One
                                </div>
                                <div *ngIf="activeInvoice.id">
                                    
                                    <div class="flex">
                                        <div class="field col-8">
                                            <h4 class="">Vendor Invoice Details:</h4>
                                        </div>
                                       
                                        <div class="iconSCSS w-full gap-1 mr-3 cursor-pointer" (click)="onEditVI(activeInvoice.id)"  >
                                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="22" 
                                                viewBox="0 0 10 11" fill="none">
                                                <g clip-path="url(#clip0_862_17281)">
                                                    <path
                                                        d="M7.0257 2.11389L7.72882 1.37075C8.03392 1.04829 8.52858 1.04829 8.83368 1.37075C9.13877 1.69321 9.13877 2.21602 8.83368 2.53848L4.40924 7.21469C4.18896 7.44751 3.91726 7.61864 3.6187 7.71264L2.5 8.06485L2.83324 6.88249C2.92218 6.56694 3.0841 6.27978 3.30438 6.04697L7.0257 2.11389ZM7.0257 2.11389L8.125 3.27574M7.5 6.30334V8.39513C7.5 8.94236 7.08027 9.38598 6.5625 9.38598H2.1875C1.66973 9.38598 1.25 8.94236 1.25 8.39513V3.77117C1.25 3.22394 1.66973 2.78032 2.1875 2.78032H4.16667"
                                                        stroke="#6F7174" stroke-width="0.625" stroke-linecap="round"
                                                        stroke-linejoin="round" />
                                                </g>
                                                <defs>
                                                    <clipPath id="clip0_862_17281">
                                                        <rect width="10" height="10.5691" fill="white"
                                                            transform="translate(0 0.138184)" />
                                                    </clipPath>
                                                </defs>
                                            </svg>
                                            <div class="text-sm font-light">Edit Vendor Invoice</div>
            
                                        </div>
                                    </div>
                                    <div class="flex">
            
                                        <div class="field col-6">
                                            <label class="mr-3 blueText">Vendor Invoice:</label>
                                            <p><b>#{{ this.activeInvoice.documentnumber}}</b></p>
                                        </div>
            
                                        <div class="field col-3">
                                            <label class="mr-3 ">Order Date:</label>
                                            <p>{{ this.activeInvoice.orderDate | date :"yyyy-MM-dd"}}</p>
                                        </div>
            
                                        <div class="field col-3">
                                            <label class="mr-3 ">Invoice Date:</label>
                                            <p>{{ this.activeInvoice.dueDate | date :"yyyy-MM-dd"}}</p>
                                        </div>
                                    </div>
                                    <hr class="custom-hr">
                                    <div class="flex gap-3">
                                        <div class="field col-7">
                                            <label class="mr-3  blueText">Address</label><br>
                                            <p>{{this.activeInvoice.vendor?.address?.billingName}}</p>
                                            <p>{{this.activeInvoice.vendor?.address?.billingAddress}}</p>
                                            <p>{{this.activeInvoice.vendor?.address?.city}}
                                                ,{{this.activeInvoice.vendor?.address?.pincode}}</p>
                                        </div>
                                        <div class="field col-4">
                                            <label class="mr-3 blueText ">Place Of Supply</label><br>
                                            <p>{{this.activeInvoice.vendor?.address?.city}}</p><br>
                                        </div>
                                    </div>
            
                                    <div>
                                        <p-table [value]="lineitems">
                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th class="text-blue-600">Item Detils</th>
                                                    <th class="text-blue-600">Price</th>
                                                    <th class="text-blue-600">Quantity</th>
                                                    <th class="text-blue-600">Discount</th>
                                                    <th class="text-blue-600">Total</th>
                                                </tr>
                                            </ng-template>
                                            <ng-template let-lineItem pTemplate="body">
                                                <tr>
                                                    <td>{{ lineItem.expenseName?.name }}</td>
                                                    <td>₹ {{ lineItem.unitPrice }}</td>
                                                    <td>{{ lineItem.quantity }}</td>
                                                    <td>₹ {{ lineItem.discount }}</td>
                                                    <td>₹ {{ lineItem.amount }}</td>
                                                </tr>
                                            </ng-template>
                                        </p-table>
            
                                        <div class=" border-200 text-right mr-6 mb-3 mt-3">
                                            <div class="text-lg blueText">
                                                SUB TOTAL: ₹ {{this.viSubTotal}}
                                            </div> <br>
                                            <div class="text-lg blueText">
                                                TOTAL: ₹ {{this.viSubTotal}}
                                            </div>
                                        </div>
            
            
                                    </div>
                                    <hr class="custom-hr">
                                    
            
                                </div>
                            </div>
                            
                        </p-panel>
                    </div>








                </div>
            </div>
        </div>

   





















        <!-- <div class="col-7  ">
            <p-panel>
                <ng-template pTemplate="header">
                    <div class="w-full">
                        <div class="grid m-0">
                            <div class="col-6 p-0">
                                <span class="p-panel-title">Purchase Order</span>
                            </div>
                        </div>
                    </div>
                </ng-template>
                <div class="right-panel-content">
                    <div class="text-center m-5" *ngIf="!activeInvoice.id">
                        <img src="assets/empty.svg" width="250" /><br />
                        Select Purchase Order
                    </div>
                    <div *ngIf="activeInvoice.id">
                        
                        <div class="flex">
                            <div class="field col-8">
                                <h4 class="">Vendor Invoice Details:</h4>
                            </div>
                           
                            <div class="iconSCSS w-full gap-1 mr-3 cursor-pointer" (click)="onEditVI(activeInvoice.id)"  >
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="22" 
                                    viewBox="0 0 10 11" fill="none">
                                    <g clip-path="url(#clip0_862_17281)">
                                        <path
                                            d="M7.0257 2.11389L7.72882 1.37075C8.03392 1.04829 8.52858 1.04829 8.83368 1.37075C9.13877 1.69321 9.13877 2.21602 8.83368 2.53848L4.40924 7.21469C4.18896 7.44751 3.91726 7.61864 3.6187 7.71264L2.5 8.06485L2.83324 6.88249C2.92218 6.56694 3.0841 6.27978 3.30438 6.04697L7.0257 2.11389ZM7.0257 2.11389L8.125 3.27574M7.5 6.30334V8.39513C7.5 8.94236 7.08027 9.38598 6.5625 9.38598H2.1875C1.66973 9.38598 1.25 8.94236 1.25 8.39513V3.77117C1.25 3.22394 1.66973 2.78032 2.1875 2.78032H4.16667"
                                            stroke="#6F7174" stroke-width="0.625" stroke-linecap="round"
                                            stroke-linejoin="round" />
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_862_17281">
                                            <rect width="10" height="10.5691" fill="white"
                                                transform="translate(0 0.138184)" />
                                        </clipPath>
                                    </defs>
                                </svg>
                                <div class="text-sm font-light">Edit Purchase Order</div>

                            </div>
                        </div>
                        <div class="flex">

                            <div class="field col-6">
                                <label class="mr-3 text-blue-500 blueText">Vendor Invoice:</label>
                                <p><b>#{{ this.activeInvoice.documentnumber}}</b></p>
                            </div>

                            <div class="field col-3">
                                <label class="mr-3 ">Order Date:</label>
                                <p>{{ this.activeInvoice.orderDate | date :"short"}}</p>
                            </div>

                            <div class="field col-3">
                                <label class="mr-3 ">Invoice Date:</label>
                                <p>{{ this.activeInvoice.dueDate | date : "short"}}</p>
                            </div>
                        </div>
                        <hr class="custom-hr">
                        <div class="flex gap-3">
                            <div class="field col-7">
                                <label class="mr-3  blueText">Address</label><br>
                                <p>{{this.activeInvoice.vendor?.address?.billingName}}</p>
                                <p>{{this.activeInvoice.vendor?.address?.billingAddress}}</p>
                                <p>{{this.activeInvoice.vendor?.address?.city}}
                                    ,{{this.activeInvoice.vendor?.address?.pincode}}</p>
                            </div>
                            <div class="field col-4">
                                <label class="mr-3 blueText ">Place Of Supply</label><br>
                                <p>{{this.activeInvoice.vendor?.address?.city}}</p><br>
                            </div>
                        </div>

                        <div>
                            <p-table [value]="lineitems">
                                <ng-template pTemplate="header">
                                    <tr>
                                        <th class="text-blue-600">Item Detils</th>
                                        <th class="text-blue-600">Price</th>
                                        <th class="text-blue-600">Quantity</th>
                                        <th class="text-blue-600">Discount</th>
                                        <th class="text-blue-600">Total</th>
                                    </tr>
                                </ng-template>
                                <ng-template let-lineItem pTemplate="body">
                                    <tr>
                                        <td>{{ lineItem.expenseName?.name }}</td>
                                        <td>₹ {{ lineItem.unitPrice }}</td>
                                        <td>{{ lineItem.quantity }}</td>
                                        <td>₹ {{ lineItem.discount }}</td>
                                        <td>₹ {{ lineItem.amount }}</td>
                                    </tr>
                                </ng-template>
                            </p-table>

                            <div class=" border-200 text-right mr-6 mb-3 mt-3">
                                <div class="text-lg blueText">
                                    SUB TOTAL: ₹ {{this.viSubTotal}}
                                </div> <br>
                                <div class="text-lg blueText">
                                    TOTAL: ₹ {{this.viSubTotal}}
                                </div>
                            </div>


                        </div>
                        <hr class="custom-hr">
                        <div class="flex gap-2 w-full">
                            <div class="field col-5">
                                <label class="mr-3  blueText">Description</label><br>
                                <p class="text-light">{{this.activeInvoice.description}}</p>
                            </div>
                            <div class="field col-5">
                                <label class="mr-3  blueText">Status:</label><br>
                                <p class="text-light">{{this.activeInvoice.status}}</p>
                            </div>
                        </div>

                    </div>
                </div>
                
            </p-panel>
        </div> -->

    

















        

    <p-blockUI [blocked]="submitted">
        <i class="pi pi-spin pi-spinner" style="font-size: 3rem"></i>
    </p-blockUI>
