<p-toast></p-toast>
<div class="">
    <div class="bg-white">
        <div class="border-bottom-1 border-200 text-right p-3">
            <button type="button" pButton label="+ Create Vendor" (click)="createVendor()"
                class=" mr-3 bg-blue-700 text-white px-4 py-2.5 rounded-md hover:bg-blue-800  "></button>
        </div>
    </div>

    <div class="m-6 bg-white border-round-3xl">
        <div class="p-5">
            <div class="flex gap-4" style=" justify-content: center;">

                <!-- VENDOR LISTS SECTION -->
                <div class="col-5">
                    <p-panel class="left-panel ">
                        <ng-template pTemplate="header">
                            <span class="p-panel-title" style="padding: 1px">Recieved From</span>
                        </ng-template>
                        <ng-template pTemplate="content">
                            <div class="left-panel-content">
                                <br />
                                <div *ngFor="let item of allVendors" class="order-list"
                                    [ngClass]="{ 'bg-gray-100': activeVendor.id === item.id }">
                                    <div class=" list-item" (click)="changeVender(item)">
                                        <div class="iconSCSS w-full gap-2 p-3">
                                            <div class="col-2  justify-center align-center">
                                                <div class="person-icon">{{
                                                    item.firstName.charAt(0) +
                                                    item.lastName.charAt(0) }}</div>
                                            </div>
                                            <div class="col-10">
                                                <div class="text-base"><b>{{ item.firstName }} {{ item.lastName
                                                        }}</b>
                                                </div>
                                                <div class="flex gap-1 ">
                                                    <div class="col-10 text-base">
                                                        <p class="text-sm">Mobile Number:+91 {{item.mobileNumber}}</p>
                                                    </div>

                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-center m-5" *ngIf="allVendors.length === 0">
                                    No Vender Found, Please Create One
                                </div>
                            </div>
                        </ng-template>
                        <p-footer> Total: {{ this.totalRecord}} </p-footer>
                    </p-panel>
                </div>
                <!-- VENDOR LISTS SECTION ENDS -->

                <div class="col-7">
                    <p-panel>
                        <ng-template pTemplate="header">
                            <div class="w-full">
                                <div class="grid m-0">
                                    <div class="col-6 p-0">
                                        <span class="p-panel-title">Vendor</span>
                                    </div>
                                </div>
                            </div>
                        </ng-template>


                        <!-- COMPLETE RIGHT PANEL -->
                        <div class="right-panel-content">
                            <div class="text-center m-5" *ngIf="!activeVendor.id">
                                <img src="assets/empty.svg" width="250" /><br />
                                Select Vendor
                            </div>

                            <!-- TOP RIGHT PANEL -->
                            <div *ngIf="activeVendor.id">
                                <div class="flex bg-gray-700 rounded-div1 mr-3 p-1">

                                    <div class="field col-4 mt-2 ml-1 font-light">
                                        <div>
                                            <p class="text-2xl font-light text-white">{{this.activeVendor.firstName}}
                                                {{this.activeVendor.lastName}}</p>
                                        </div>
                                        <div class="mt-2">
                                            <p class="text-sm  text-gray-200">{{this.activeVendor.email}}</p>
                                            <p class="text-sm text-gray-200">+91 {{this.activeVendor.mobileNumber}}</p>
                                        </div>
                                    </div>

                                    <div class="field col-8">
                                        <div class="iconSCSS bg-white rounded-div1 mt-2 ">
                                            <div class="field col-2">
                                                <div class="p-3 m-2 border-1 border-primary border-round-lg">
                                                    <div class="centerItem">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                                            viewBox="0 0 24 24" fill="none">
                                                            <path
                                                                d="M20.25 6.75H5.25C5.05109 6.75 4.86032 6.67098 4.71967 6.53033C4.57902 6.38968 4.5 6.19891 4.5 6C4.5 5.80109 4.57902 5.61032 4.71967 5.46967C4.86032 5.32902 5.05109 5.25 5.25 5.25H18C18.1989 5.25 18.3897 5.17098 18.5303 5.03033C18.671 4.88968 18.75 4.69891 18.75 4.5C18.75 4.30109 18.671 4.11032 18.5303 3.96967C18.3897 3.82902 18.1989 3.75 18 3.75H5.25C4.65326 3.75 4.08097 3.98705 3.65901 4.40901C3.23705 4.83097 3 5.40326 3 6V18C3 18.5967 3.23705 19.169 3.65901 19.591C4.08097 20.0129 4.65326 20.25 5.25 20.25H20.25C20.6478 20.25 21.0294 20.092 21.3107 19.8107C21.592 19.5294 21.75 19.1478 21.75 18.75V8.25C21.75 7.85218 21.592 7.47064 21.3107 7.18934C21.0294 6.90804 20.6478 6.75 20.25 6.75ZM20.25 18.75H5.25C5.05109 18.75 4.86032 18.671 4.71967 18.5303C4.57902 18.3897 4.5 18.1989 4.5 18V8.12156C4.74082 8.20693 4.9945 8.25037 5.25 8.25H20.25V18.75ZM15.75 13.125C15.75 12.9025 15.816 12.685 15.9396 12.5C16.0632 12.315 16.2389 12.1708 16.4445 12.0856C16.65 12.0005 16.8762 11.9782 17.0945 12.0216C17.3127 12.065 17.5132 12.1722 17.6705 12.3295C17.8278 12.4868 17.935 12.6873 17.9784 12.9055C18.0218 13.1238 17.9995 13.35 17.9144 13.5555C17.8292 13.7611 17.685 13.9368 17.5 14.0604C17.315 14.184 17.0975 14.25 16.875 14.25C16.5766 14.25 16.2905 14.1315 16.0795 13.9205C15.8685 13.7095 15.75 13.4234 15.75 13.125Z"
                                                                fill="#3579F3" />
                                                        </svg>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="field col-5 text-left">
                                                <p class="text-xl">â‚¹ {{totalGrossAmount}} </p>
                                                <p class="text-lg blueText">Total Amount</p>
                                            </div>
                                            <div class="field col-5" *ngIf="totalRemainingAmount > 0">
                                                <div class="flex gap-1  w-full bg-red-100 rounded-div1 p-1">
                                                    <div class="col-3 leftP text-right">
                                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                            viewBox="0 0 18 18" fill="none">
                                                            <path
                                                                d="M9 15.75C7.66498 15.75 6.35993 15.3541 5.2499 14.6124C4.13987 13.8707 3.27471 12.8165 2.76382 11.5831C2.25292 10.3497 2.11925 8.99252 2.3797 7.68314C2.64015 6.37377 3.28303 5.17104 4.22703 4.22703C5.17104 3.28303 6.37377 2.64015 7.68314 2.3797C8.99251 2.11925 10.3497 2.25292 11.5831 2.76382C12.8165 3.27471 13.8707 4.13987 14.6124 5.2499C15.3541 6.35994 15.75 7.66498 15.75 9C15.75 10.7902 15.0388 12.5071 13.773 13.773C12.5071 15.0388 10.7902 15.75 9 15.75ZM9 3.21429C7.8557 3.21429 6.73709 3.55361 5.78563 4.18936C4.83418 4.8251 4.09261 5.72871 3.6547 6.78591C3.21679 7.84311 3.10222 9.00642 3.32546 10.1287C3.5487 11.2511 4.09974 12.282 4.90888 13.0911C5.71803 13.9003 6.74895 14.4513 7.87127 14.6745C8.99358 14.8978 10.1569 14.7832 11.2141 14.3453C12.2713 13.9074 13.1749 13.1658 13.8106 12.2144C14.4464 11.2629 14.7857 10.1443 14.7857 9C14.7857 7.46554 14.1761 5.99392 13.0911 4.90889C12.0061 3.82385 10.5345 3.21429 9 3.21429Z"
                                                                fill="#C22B39" />
                                                            <path
                                                                d="M10.6457 12.75L8.25 9.95501V5.25H9.10714V9.54001L11.25 12.045L10.6457 12.75Z"
                                                                fill="#C22B39" />
                                                        </svg>
                                                    </div>
                                                    <div class="text-center">
                                                        Partially Paid
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="field col-5" *ngIf="totalRemainingAmount <= 0">
                                                <div class="flex">
                                                    <div class="bg-green-300 rounded-div1 px-4 py-1">
                                                        <div class="leftP text-right">
                                                            <!-- <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                                                            viewBox="0 0 18 18" fill="none">
                                                            <path
                                                                d="M9 15.75C7.66498 15.75 6.35993 15.3541 5.2499 14.6124C4.13987 13.8707 3.27471 12.8165 2.76382 11.5831C2.25292 10.3497 2.11925 8.99252 2.3797 7.68314C2.64015 6.37377 3.28303 5.17104 4.22703 4.22703C5.17104 3.28303 6.37377 2.64015 7.68314 2.3797C8.99251 2.11925 10.3497 2.25292 11.5831 2.76382C12.8165 3.27471 13.8707 4.13987 14.6124 5.2499C15.3541 6.35994 15.75 7.66498 15.75 9C15.75 10.7902 15.0388 12.5071 13.773 13.773C12.5071 15.0388 10.7902 15.75 9 15.75ZM9 3.21429C7.8557 3.21429 6.73709 3.55361 5.78563 4.18936C4.83418 4.8251 4.09261 5.72871 3.6547 6.78591C3.21679 7.84311 3.10222 9.00642 3.32546 10.1287C3.5487 11.2511 4.09974 12.282 4.90888 13.0911C5.71803 13.9003 6.74895 14.4513 7.87127 14.6745C8.99358 14.8978 10.1569 14.7832 11.2141 14.3453C12.2713 13.9074 13.1749 13.1658 13.8106 12.2144C14.4464 11.2629 14.7857 10.1443 14.7857 9C14.7857 7.46554 14.1761 5.99392 13.0911 4.90889C12.0061 3.82385 10.5345 3.21429 9 3.21429Z"
                                                                fill="#C22B39" />
                                                            <path
                                                                d="M10.6457 12.75L8.25 9.95501V5.25H9.10714V9.54001L11.25 12.045L10.6457 12.75Z"
                                                                fill="#C22B39" />
                                                        </svg> -->
                                                        </div>
                                                        <div class="rightP text-center">
                                                            Paid
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="mt-2 flex w-full ">
                                            <div class="field col-6">
                                                <p class="text-base text-white">Total Amount paid</p>
                                                <p class="text-lg greenText">â‚¹ {{totalGrossAmount -
                                                    totalRemainingAmount}}</p>
                                            </div>
                                            <div class="vertical-line"></div>
                                            <div class="field col-6">
                                                <p class="text-base text-white">Total Amount Due</p>
                                                <p class="text-lg text-red-300">â‚¹ {{totalRemainingAmount}}</p>

                                            </div>
                                        </div>

                                    </div>
                                </div>

                                <div class="mt-3">

                                    <div class="button-container">
                                        <button type="button" label="Orders" class="p-2"
                                            [ngClass]="{'defaultSCSS text-lg': true , 'onClickButton':showOrders }"
                                            (click)="showOrdersPage()">Orders</button>
                                        <button type="button" label="invoice" class="p-2"
                                            [ngClass]="{'defaultSCSS text-lg': true, 'onClickButton': showInvoices}"
                                            (click)="showInvoicesPage(activeVendor)">Invoices</button>
                                    </div>

                                    <div *ngIf="showOrders" class="mt-5">
                                        <p class="blueText" *ngIf="allPurchaseOrders.length >0 ">Invoice No.</p>
                                        <div *ngFor="let item of allPurchaseOrders" class="">
                                            <div class="">
                                                <div class="iconSCSS w-full gap-1">
                                                    <div class="col-8 text-left">
                                                        <div class="text-lg">#{{item.orderNumber }}</div>
                                                        <div class="font-light text-sm">{{item.orderDate | date:
                                                            'yyyy-MM-dd'}}</div>
                                                    </div>
                                                    <div class="col-4 text-right">
                                                        <div class="">
                                                            <p>Total: â‚¹{{item.grossTotal}}</p>
                                                        </div>
                                                    </div>
                                                </div>
                                                <hr class="custom-hr">
                                            </div>
                                        </div>
                                        <div *ngIf="allPurchaseOrders.length === 0" class="order-list mt-5">
                                            <p class="text-lg mt-3 text-center">No Sales Orders Available</p>
                                        </div>
                                    </div>

                                    <div *ngIf="showInvoices" class="mt-5 ">

                                        <div class="">
                                            <div *ngFor="let item of allPurchaseInvoices" class="">
                                                <p class="blueText">Purchase Invoice Number:</p>
                                                <div class="">
                                                    <div class="iconSCSS w-full gap-1">
                                                        <div class="col-8 text-left">
                                                            <div class="text-lg">#{{item.invoiceNo }}</div>
                                                            <div class="font-light text-sm">Invoice Date:
                                                                {{item.invoiceDate | date:
                                                                'yyyy-MM-dd'}}</div>
                                                        </div>
                                                        <div class="col-4 text-right">
                                                            <div class="">

                                                                <p>Total: â‚¹{{item.grossTotal ? item.grossTotal : '0.00'
                                                                    }}
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <hr class="custom-hr">
                                                </div>
                                            </div>
                                            <div *ngIf="allPurchaseInvoices.length === 0" class="order-list mt-5">
                                                <p class="text-lg mt-3 text-center">No Sales Invoices Available</p>
                                            </div>
                                        </div>

                                    </div>

                                </div>

                            </div>
                        </div>
                    </p-panel>
                </div>
            </div>

        </div>
    </div>
</div>
<p-blockUI [blocked]="submitted">
    <i class="pi pi-spin pi-spinner" style="font-size: 3rem"></i>
</p-blockUI>