<!-- <div class="bg-bluegray-700 text-gray-100 p-3 flex justify-content-between lg:justify-content-center align-items-center flex-wrap mb-5"
    *ngIf="!store?.company?.subscriptionActive"> -->
<!-- <div class="font-bold mr-8">ðŸ”¥ Hot Deals!</div> -->
<!-- <div class="align-items-center hidden lg:flex">
        <span class="line-height-3"> <i class="pi pi-exclamation-triangle text-yellow-300 mr-2"></i> Your Subscription
            is
            inactive, activate
            to enable store billing!</span>
    </div>
    <a class="flex align-items-center ml-2 mr-8">
        <a class="text-white" [routerLink]="['/settings/billing']"><span class="underline font-bold">Activate
                Now</span></a>
    </a> -->
<!-- <a pRipple
        class="flex align-items-center no-underline justify-content-center border-circle text-gray-50 hover:bg-bluegray-700 cursor-pointer transition-colors transition-duration-150"
        style="width:2rem; height: 2rem">
        <i class="pi pi-times"></i>
    </a> -->
<!-- </div> -->

<div class="surface-ground px-4 py-5 md:px-4">
    <!-- <div class="text-center text-l m-2"> Your Subscription is inactive, activate to create Purchase Order!
        <a class=" ml-2 mr-8">
            <a class="text-black" [routerLink]="['/settings/billing']"><span class="underline font-bold">Activate Now</span></a>
        </a>
    </div> -->
    <div class="bg-bluegray-700 text-gray-100 p-3 flex justify-content-between lg:justify-content-center align-items-center flex-wrap mb-5"
        *ngIf="!store?.company?.subscriptionActive">
        <div class="align-items-center hidden lg:flex">
            <span class="line-height-3"> <i class="pi pi-exclamation-triangle text-yellow-300 mr-2"></i> Your
                Subscription
                is
                inactive, activate
                to enable store billing!</span>
        </div>
        <a class="flex align-items-center ml-2 mr-8">
            <a class="text-white" [routerLink]="['/settings/billing']"><span class="underline font-bold">Activate
                    Now</span></a>
        </a>
        <a pRipple
            class="flex align-items-center no-underline justify-content-center border-circle text-gray-50 hover:bg-bluegray-700 cursor-pointer transition-colors transition-duration-150"
            style="width:2rem; height: 2rem">
            <i class="pi pi-times"></i>
        </a>
    </div>

    <div *ngIf="!getStarted" class="border-1 border-blue-400 p-3 border-round mb-5">
        <div class="text-center text-800  text-2xl">Getting Started</div>
        <div class="text-center text-600  subtitle mt-2 mb-2">Great to have you on board! Feel free to explore, or
            follow the
            steps below to
            get
            started.</div>
        <div class="grid">
            <div class="col">
                <ul class="list-none mx-0 mb-0 mt-4 p-0">
                    <li (click)="walkthroughOnclick(0)" class="flex align-items-center p-3">
                        <span *ngIf="companyStat"
                            class="inline-flex mr-3 align-items-center justify-content-center bg-green-500 text-white border-circle border-1 surface-border"
                            style="width: 30px; height: 30px;">
                            <i class="pi pi-check cursor-pointer"></i>
                        </span>
                        <span *ngIf="!companyStat"
                            class="inline-flex mr-3 align-items-center justify-content-center bg-blue-500 text-white border-circle border-1 surface-border"
                            style="width: 30px; height: 30px;">
                            <i class="pi pi-chevron-right cursor-pointer"></i>
                        </span>
                        <span class="text-900 line-height-3 cursor-pointer">Complete your company details</span>
                    </li>

                    <li (click)="walkthroughOnclick(1)" class="flex align-items-center p-3">
                        <span *ngIf="catalogStat"
                            class="inline-flex mr-3 align-items-center justify-content-center bg-green-500 surface-0 text-white border-circle border-1 surface-border"
                            style="width: 30px; height: 30px;">
                            <i class="pi pi-check cursor-pointer"></i></span>
                        <span *ngIf="!catalogStat"
                            class="inline-flex mr-3 align-items-center justify-content-center bg-blue-500 surface-0 text-white border-circle border-1 surface-border"
                            style="width: 30px; height: 30px;">
                            <i class="pi pi-chevron-right cursor-pointer"></i></span>
                        <span class="text-900 line-height-3 cursor-pointer">Setup store details</span>
                    </li>

                    <li (click)="walkthroughOnclick(2)" class="flex align-items-center p-3">
                        <span *ngIf="profileStatusStat"
                            class="inline-flex mr-3 align-items-center justify-content-center bg-green-500 surface-0 text-white border-circle border-1 surface-border"
                            style="width: 30px; height: 30px;">
                            <i class="pi pi-check cursor-pointer"></i></span>
                        <span *ngIf="!profileStatusStat"
                            class="inline-flex mr-3 align-items-center justify-content-center bg-blue-500 surface-0 text-white border-circle border-1 surface-border"
                            style="width: 30px; height: 30px;">
                            <i class="pi pi-chevron-right cursor-pointer"></i></span>
                        <span class="text-900 line-height-3 cursor-pointer">
                            Complete your profile
                        </span>
                    </li>

                    <li (click)="walkthroughOnclick(3)" class="flex align-items-center p-3">
                        <span *ngIf="catalogStat"
                            class="inline-flex mr-3 align-items-center justify-content-center bg-green-500 surface-0 text-white border-circle border-1 surface-border"
                            style="width: 30px; height: 30px;">
                            <i class="pi pi-check cursor-pointer"></i></span>
                        <span *ngIf="!catalogStat"
                            class="inline-flex mr-3 align-items-center justify-content-center bg-blue-500 surface-0 text-white border-circle border-1 surface-border"
                            style="width: 30px; height: 30px;">
                            <i class="pi pi-chevron-right cursor-pointer"></i></span>
                        <span class="text-900 line-height-3 cursor-pointer">Add Products</span>
                    </li>

                    <li (click)="walkthroughOnclick(4)" class="flex align-items-center p-3">
                        <span *ngIf="paymentMethodStat"
                            class="inline-flex mr-3 align-items-center justify-content-center bg-green-500 surface-0 text-white border-circle border-1 surface-border"
                            style="width: 30px; height: 30px;">
                            <i class="pi pi-check cursor-pointer"></i></span>
                        <span *ngIf="!paymentMethodStat"
                            class="inline-flex mr-3 align-items-center justify-content-center bg-blue-500 surface-0 text-white border-circle border-1 surface-border"
                            style="width: 30px; height: 30px;">
                            <i class="pi pi-chevron-right cursor-pointer"></i></span>
                        <span class="text-900 line-height-3 cursor-pointer">Setup payment methods</span>
                    </li>

                    <li (click)="walkthroughOnclick(5)" class="flex align-items-center p-3">
                        <span *ngIf="machineStat"
                            class="inline-flex mr-3 align-items-center justify-content-center bg-green-500 surface-0 text-white border-circle border-1 surface-border"
                            style="width: 30px; height: 30px;">
                            <i class="pi pi-check cursor-pointer"></i></span>
                        <span *ngIf="!machineStat"
                            class="inline-flex mr-3 align-items-center justify-content-center bg-blue-500 surface-0 text-white border-circle border-1 surface-border"
                            style="width: 30px; height: 30px;">
                            <i class="pi pi-chevron-right cursor-pointer"></i></span>
                        <span class="text-900 line-height-3 cursor-pointer">Setup POS Machines
                        </span>
                    </li>

                </ul>
            </div>
            <div *ngIf="selectedOption === 0" class="col flex align-items-center justify-content-center">
                <div class="text-center">
                    <div class="text-800  text-2xl">
                        Complete Company Details
                    </div>
                    <div class="text-700  text-xl m-5">
                        Fill in the details required to operate your store or
                        read a detailed guide of how to setup a store, what are the important steps to setup a store?
                    </div>
                    <div class="text-700  text-xl m-5">
                        <button pButton label="Read Walkthrough" class="ml-2 p-button-info"
                            (click)="readWalkThrough()"></button>
                        <button pButton label="Company Details" class="ml-2 p-button-success"
                            (click)="openCompany()"></button>
                    </div>
                </div>
            </div>
            <div *ngIf="selectedOption === 1" class="col flex align-items-center justify-content-center">
                <div class="text-center">
                    <div class="text-800  text-2xl">
                        Store Setup Details
                    </div>
                    <div class="text-700  text-xl m-5">
                        Fill in the details required to operate your store or
                        read a detailed guide of how to setup a store, what are the important steps to setup a store?
                    </div>
                    <div class="text-700  text-xl m-5">
                        <button pButton label="Read Walkthrough" class="ml-2 p-button-info"
                            (click)="readWalkThrough()"></button>
                        <button pButton label="Setup Store" class="ml-2 p-button-success"
                            (click)="openStore()"></button>
                    </div>
                </div>
            </div>
            <div *ngIf="selectedOption === 2" class="col flex align-items-center justify-content-center">
                <div class="text-center">
                    <div class="text-800  text-2xl">
                        Completed Your Profile
                    </div>
                    <div class="text-700  text-xl m-5">
                        Fill in the details required to operate your store or
                        read a detailed guide of how to setup a store, what are the important steps to setup a store?
                    </div>
                    <div class="text-700  text-xl m-5">
                        <button pButton label="Read Walkthrough" class="ml-2 p-button-info"
                            (click)="readWalkThrough()"></button>
                        <button pButton label="Your Profile" class="ml-2 p-button-success"
                            (click)="openCompleteProfile()"></button>
                    </div>
                </div>
            </div>
            <div *ngIf="selectedOption === 3" class="col flex align-items-center justify-content-center">
                <div class="text-center">
                    <div class="text-800  text-2xl">
                        Add Products
                    </div>
                    <div class="text-700  text-xl m-5">
                        Fill in the details required to operate your store or
                        read a detailed guide of how to setup a store, what are the important steps to setup a store?
                    </div>
                    <div class="text-700  text-xl m-5">
                        <button pButton label="Read Walkthrough" class="ml-2 p-button-info"
                            (click)="readWalkThrough()"></button>
                        <button pButton label="Add Products" class="ml-2 p-button-success"
                            (click)="openAddProducts()"></button>
                    </div>
                </div>
            </div>
            <div *ngIf="selectedOption === 4" class="col flex align-items-center justify-content-center">
                <div class="text-center">
                    <div class="text-800  text-2xl">
                        Setup Payment Methods
                    </div>
                    <div class="text-700  text-xl m-5">
                        Fill in the details required to operate your store or
                        read a detailed guide of how to setup a store, what are the important steps to setup a store?
                    </div>
                    <div class="text-700  text-xl m-5">
                        <button pButton label="Read Walkthrough" class="ml-2 p-button-info"
                            (click)="readWalkThrough()"></button>
                        <button pButton label="Setup Payment Methods" class="ml-2 p-button-success"
                            (click)="openPayment()"></button>
                    </div>
                </div>
            </div>

            <div *ngIf="selectedOption === 5" class="col flex align-items-center justify-content-center">
                <div class="text-center">
                    <div class="text-800  text-2xl">
                        Setup POS Machine
                    </div>
                    <div class="text-700  text-xl m-5">
                        Fill in the details required to operate your store or
                        read a detailed guide of how to setup a store, what are the important steps to setup a store?
                    </div>
                    <div class="text-700  text-xl m-5">
                        <button pButton label="Read Walkthrough" class="ml-2 p-button-info"
                            (click)="readWalkThrough()"></button>
                        <button pButton label="Setup POS Machine" class="ml-2 p-button-success"
                            (click)="openPosMachine()"></button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class=" grid">
        <div class="col-12 md:col-6 lg:col-3" *ngFor="let panel of panelsData">
            <div class="surface-card shadow-2 p-3 border-round">
                <div class="flex justify-content-between mb-3">
                    <div>
                        <span class="block text-500 font-medium mb-3">{{ panel.title }}</span>
                        <div class="text-900 font-medium text-xl"> {{ panel.metric }}</div>
                    </div>
                    <div class="flex align-items-center justify-content-center bg-{{ panel.color ?? 'blue'}}-100 border-round"
                        style="width:2.5rem;height:2.5rem">
                        <i class="pi pi-{{ panel.icon }} text-{{ panel.color ?? 'blue' }}-500 text-xl"></i>
                    </div>
                </div>
                <span class="text-green-500 font-medium">{{ panel.submetric }} </span>
                <span class="text-500">{{ panel.period }}</span>
            </div>
        </div>
        <div class="col-12 md:col-6">
            <p-card styleClass="p-4" header="Sales">
                <p-chart type="line" [data]="lineStylesData" [options]="basicOptions"></p-chart>
            </p-card>
        </div>
        <div class="col-12 md:col-6">
            <p-card styleClass="p-4" header="Stock">
                <p-chart type="bar" [data]="basicData" [options]="basicOptions"></p-chart>
            </p-card>
        </div>
        <div class="col-12 lg:col-4">
            <p-card styleClass="p-4 text-center"><img src="assets/iteam.svg" alt="Image"
                    class="mx-auto block mb-4 h-10rem">
                <div class="text-900 font-medium mb-3 text-xl">Discounts & Promotions</div>
                <p class="mt-0 mb-4 p-0 line-height-3">Configure discounts at global store level or at product
                    level.
                    Value based and Percentage based discounts.</p>
                <button pButton icon="pi pi-arrow-right" label="View Now" routerLink="/store/discounts"></button>

            </p-card>
        </div>
        <div class="col-12 lg:col-4">
            <p-card styleClass="p-4 text-center"> <img src="assets/iprojections.svg" alt="Image"
                    class="mx-auto block mb-4 h-10rem">
                <div class="text-900 font-medium mb-3 text-xl">Customer Orders</div>
                <p class="mt-0 mb-4 p-0 line-height-3">All the latest order placed from customers through store
                    and
                    customer mobile app. All in one place.</p>

                <button pButton icon="pi pi-arrow-right" label="View Now" routerLink="/store/orders"></button>
            </p-card>
        </div>
        <div class="col-12 lg:col-4">
            <p-card styleClass="p-4 text-center"><img src="assets/ifinance.svg" alt="Image"
                    class="mx-auto block mb-4 h-10rem">
                <div class="text-900 font-medium mb-3 text-xl">Returns & Refunds</div>
                <p class="mt-0 mb-4 p-0 line-height-3">Customer returns and refunds processed across all POS
                    Machines
                    can be reconciled centrally.</p>
                <button pButton icon="pi pi-arrow-right" label="View Now" routerLink="/store/return-refund"></button>

            </p-card>
        </div>
        <div class="col-12 md:col-6">
            <p-card styleClass="p-4 h-30rem" header="Purchase Approvals">
                <ul class="list-none m-0 p-0">
                    <li *ngFor="let po of confirmedPos"
                        class="py-3 border-bottom-1 surface-border flex md:align-items-start md:justify-content-between flex-column md:flex-row">
                        <div class="flex align-items-start mr-0 lg:mr-5"> <i
                                class="pi pi-exclamation-circle m-5 text-3xl text-orange-500"></i>
                            <div><span class=" text-900 font-medium block mb-2">
                                    {{ po.distributor.distributorName }}
                                </span>
                                <div class="text-700 mb-2">order pending payment.</div>
                                <a class="text-blue-500 cursor-pointer"
                                    [routerLink]="'/store/purchase-orders/edit/'+po.id"><i
                                        class="pi pi-file text-sm mr-2"></i><span>Order
                                        #{{po.documentnumber}}</span></a>
                            </div>
                        </div>
                        <span class="block text-500 font-medium ml-7 md:ml-5 mt-2 md:mt-0">
                            {{ getDt(po.updatedAt) | timeAgo }}
                        </span>
                    </li>
                </ul>
                <div class="flex align-items-center justify-content-center h-20rem"
                    *ngIf="!confirmedPos || confirmedPos.length===0">
                    No Purchase orders to make process
                </div>
            </p-card>
        </div>
        <div class="col-12 md:col-6">
            <p-card styleClass="p-4 h-30rem" header="Goods Receipts">
                <ul class="list-none m-0 p-0">
                    <li *ngFor="let po of shippedPos"
                        class="py-3 border-bottom-1 surface-border flex md:align-items-start md:justify-content-between flex-column md:flex-row">
                        <div class="flex align-items-start mr-0 lg:mr-5"> <i
                                class="pi pi-exclamation-circle m-5 text-3xl text-orange-500"></i>
                            <div><span class=" text-900 font-medium block mb-2">
                                    {{ po.distributor.distributorName }}
                                </span>
                                <div class="text-700 mb-2">order pending receipt.</div>
                                <a class="text-blue-500 cursor-pointer"
                                    [routerLink]="'/store/purchase-orders/edit/'+po.id"><i
                                        class="pi pi-file text-sm mr-2"></i><span>Order
                                        #{{po.documentnumber}}</span></a>
                            </div>
                        </div>
                        <span class="block text-500 font-medium ml-7 md:ml-5 mt-2 md:mt-0">
                            {{ getDt(po.updatedAt) | timeAgo }}
                        </span>
                    </li>
                </ul>
                <div class="flex align-items-center justify-content-center h-20rem" *ngIf="!shippedPos">
                    No Shipments to receive
                </div>
            </p-card>
        </div>
    </div>
</div>

<form #f="ngForm">
    <p-dialog [(visible)]="storeDialog" [style]="{width: '450px'}" header="Store" [modal]="true" styleClass="p-fluid">
        <ng-template pTemplate="content">
            <div class="field">
                <label for="storeName">Store Name</label>
                <input type="text" pInputText name="storeName" #storeName="ngModel" [(ngModel)]="store.storeName"
                    required pattern="^[a-zA-z]+([\s][a-zA-Z]+)*$" minlength="1" maxlength="255" />
                <error-message [controlName]="storeName"></error-message>
            </div>
            <div class="field" *ngIf="global">
                <label for="company">Company</label>
                <p-dropdown [options]="companies" name="company" #company="ngModel" [(ngModel)]="store.company"
                    placeholder="Choose Company" optionLabel="companyName" [showClear]="true" appendTo="body"
                    [required]="true">
                </p-dropdown>
                <error-message [controlName]="company"></error-message>
            </div>
            <div class="field">
                <label for="storeLocation">Store Location</label>
                <input type="text" pInputText name="storeLocation" #storeLocation="ngModel"
                    [(ngModel)]="store.storeLocation" required  minlength="1"
                    maxlength="60" />
                <error-message [controlName]="storeLocation"></error-message>
            </div>
            <div class="field">
                <label for="storeAddress1">Store Address Street</label>
                <input type="text" pInputText name="storeAddress1" #storeAddress1="ngModel"
                    [(ngModel)]="store.storeAddress1" required pattern="^[^-\s]+([\s][a-zA-Z0-9]+)*$" minlength="1"
                    maxlength="60" />
                <error-message [controlName]="storeAddress1"></error-message>
            </div>
            <div class="field">
                <label for="storeAddress2">Store Address Area</label>
                <input type="text" pInputText name="storeAddress2" #storeAddress2="ngModel"
                    [(ngModel)]="store.storeAddress2" required pattern="^[^-\s]+([\s][a-zA-Z0-9]+)*$" minlength="1"
                    maxlength="60" />
                <error-message [controlName]="storeAddress2"></error-message>
            </div>
            <div class="field">
                <label for="state">Store State</label>
                <p-dropdown [options]="states" name="state" #state="ngModel" [(ngModel)]="store.state"
                    placeholder="Choose State" optionLabel="stateName" [showClear]="true" appendTo="body"
                    [required]="true" [required]="true">
                </p-dropdown>
                <error-message [controlName]="state"></error-message>
            </div>
            <div class="field">
                <label for="storePhone">Store Phone</label>
                <input type="text" pInputText name="storePhone" #storePhone="ngModel" [(ngModel)]="store.storePhone"
                    [pKeyFilter]="'int'" minlength="10" maxlength="10" />
                <error-message [controlName]="storePhone"></error-message>
            </div>
            <div class="field">
                <label for="storePhone">Store Email</label>
                <input type="text" pInputText name="storeMail" #storeMail="ngModel" [(ngModel)]="store.storeMail" email
                    minlength="6" maxlength="30" />
                <error-message [controlName]="storeMail"></error-message>
            </div>
            <div class="field">
                <label for="gstNumber" class="required">Store GSTN </label>
                <input type="text" pInputText name="gstNumber" #gstNumber="ngModel" [(ngModel)]="store.gstNumber"
                    minlength="15" maxlength="15" pattern="^[0-9]{2}[A-Z]{5}[0-9]{4}[A-Z]{1}[1-9A-Z]{1}Z[0-9A-Z]{1}$" />
                <error-message [controlName]="gstNumber"></error-message>
            </div>

        </ng-template>

        <ng-template pTemplate="footer">
            <button pButton pRipple label="Cancel" icon="pi pi-times" class="p-button-secondary"
                (click)="hideDialog()"></button>
            <button pButton pRipple label="Save" icon="pi pi-check" class="p-button" (click)="saveStore()"
                [disabled]="!f.valid"></button>
        </ng-template>
    </p-dialog>
</form>
